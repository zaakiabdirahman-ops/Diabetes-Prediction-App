<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Diabetes Prediction App - Sign In üöÄ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
        background: url("{{ url_for('static', filename='Gemini_Generated_Image_9ya5sk9ya5sk9ya5.png') }}")
                no-repeat center center fixed;
    background-size: cover;
    overflow-x: hidden;
    color: white;
    min-height: 100vh;
    position: relative;
    }
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: rgba(2, 6, 23, 0.85);
      z-index: -1;
    }
    @keyframes rocketLaunch {
      0% { transform: translateY(0); }
      50% { transform: translateY(-30px); }
      100% { transform: translateY(-100vh) scale(0.9); opacity: 0; }
    }
    @keyframes hologram {
      0% { transform: rotateY(0); }
      100% { transform: rotateY(360deg); }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes cardGlow {
      0%, 100% { box-shadow: 0 0 20px rgba(34, 211, 238, 0.3); }
      50% { box-shadow: 0 0 30px rgba(59, 130, 246, 0.5); }
    }
    @keyframes bounce {
      0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
      40%, 43% { transform: translate3d(0,-15px,0); }
      70% { transform: translate3d(0,-7px,0); }
      90% { transform: translate3d(0,-3px,0); }
    }
    .animate-rocket { animation: rocketLaunch 2.5s ease-in-out forwards; }
    .animate-hologram { animation: hologram 3s linear infinite; }
    .fade-out { animation: fadeOut 1s forwards; }
    .fade-in { animation: fadeIn 0.8s ease-out forwards; }
    .bounce { animation: bounce 1s ease infinite; }
    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; visibility: hidden; }
    }

    .confidence-box {
      background: linear-gradient(135deg, rgba(34,211,238,0.2), rgba(14,165,233,0.3), rgba(59,130,246,0.3));
      border: 1px solid rgba(34,211,238,0.5);
      box-shadow: 0 0 15px rgba(14,165,233,0.3);
      border-radius: 12px;
      padding: 8px 16px;
      display: inline-block;
      margin-top: 8px;
      font-weight: 600;
      animation: pulseGlow 3s ease-in-out infinite;
    }
    @keyframes pulseGlow {
      0%, 100% { box-shadow: 0 0 15px rgba(14,165,233,0.3); }
      50% { box-shadow: 0 0 25px rgba(59,130,246,0.5); }
    }

    .form-input:focus {
      box-shadow: 0 0 0 3px rgba(34, 211, 238, 0.3);
    }

    .email-preview {
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(34, 211, 238, 0.3);
      border-radius: 12px;
      padding: 15px;
      margin-top: 20px;
    }

    .main-app {
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(34, 211, 238, 0.3);
      border-radius: 12px;
      padding: 20px;
      margin-top: 20px;
      width: 100%;
      max-width: 800px;
    }

    .info-card {
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(34, 211, 238, 0.3);
      border-radius: 16px;
      padding: 25px;
      margin: 15px 0;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      animation: cardGlow 4s ease-in-out infinite;
    }

    .info-card:hover {
      transform: translateY(-5px);
      border-color: rgba(34, 211, 238, 0.6);
    }

    .card-icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
      color: #22d3ee;
    }

    .glass-panel {
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(34, 211, 238, 0.3);
      border-radius: 16px;
    }

    .google-btn {
      background: white;
      color: #757575;
      border: 1px solid #dadce0;
      border-radius: 12px;
      padding: 12px 16px;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      transition: all 0.3s ease;
      width: 100%;
    }

    .google-btn:hover {
      background: #f8f9fa;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .result-illustration {
      width: 120px;
      height: 120px;
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(34, 211, 238, 0.3);
    }

    .result-illustration i {
      font-size: 60px;
    }

    .bmi-compact {
      padding: 15px;
      margin: 10px 0;
    }

    .bmi-compact .card-icon {
      font-size: 1.8rem;
      margin-bottom: 10px;
    }

    .bmi-compact h2 {
      font-size: 1.4rem;
      margin-bottom: 15px;
    }
  </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-6">

  <!-- INTRO SCREEN -->
  <div id="introScreen" class="fixed inset-0 flex flex-col items-center justify-center text-center bg-black/90 backdrop-blur-md z-50">
    <!-- Animated Rocket -->
    <div id="rocketIcon" class="text-7xl mb-4 animate-bounce">üöÄ</div>

    <!-- Main Title -->
    <h1 class="text-3xl sm:text-4xl font-extrabold text-cyan-300 mb-2 animate-pulse">
      Diabetes Prediction System
    </h1>

    <!-- Subtitle -->
    <p class="text-cyan-200 text-lg mt-2 mb-6 opacity-90">
      AI-Powered Health Analytics Platform
    </p>

    <!-- Launch Button -->
    <button id="startBtn"
      class="bg-gradient-to-r from-cyan-400 to-blue-500 hover:from-blue-400 hover:to-cyan-400
             text-black font-semibold py-3 px-10 rounded-full shadow-lg hover:scale-105 transition-transform duration-300">
      Initialize System ‚ö°
    </button>

    <!-- Developer Credit -->
    <div class="absolute bottom-6 text-cyan-400 text-sm opacity-80">
      Developed by <span class="font-semibold text-white">Zakariye Abdirahman üë®‚Äçüíª</span>
    </div>
  </div>

  <!-- INTRODUCTION & DISCLAIMER CARDS -->
  <div id="infoScreen" class="hidden w-full max-w-4xl glass-panel p-6 mt-10">
    <h1 class="text-4xl font-bold mb-2 text-center text-cyan-300">Diabetes Prediction System</h1>
    <p class="text-center text-lg text-cyan-200 mb-8">Please review the following information before proceeding</p>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Introduction Card -->
      <div class="info-card">
        <div class="card-icon">
          <i class="fas fa-info-circle"></i>
        </div>
        <h2 class="text-2xl font-bold text-cyan-300 mb-4">System Introduction</h2>
        <div class="text-cyan-200 space-y-3">
          <p class="flex items-start">
            <i class="fas fa-brain text-cyan-400 mr-2 mt-1"></i>
            <span>This AI-powered platform uses advanced machine learning algorithms to analyze health parameters and assess diabetes risk.</span>
          </p>
          <p class="flex items-start">
            <i class="fas fa-chart-line text-cyan-400 mr-2 mt-1"></i>
            <span>The system evaluates multiple biomarkers including BMI, HbA1c levels, blood glucose, and other health indicators.</span>
          </p>
          <p class="flex items-start">
            <i class="fas fa-shield-alt text-cyan-400 mr-2 mt-1"></i>
            <span>Your data is processed securely with enterprise-grade encryption and privacy protection.</span>
          </p>
          <p class="flex items-start">
            <i class="fas fa-rocket text-cyan-400 mr-2 mt-1"></i>
            <span>Developed with cutting-edge technology to provide accurate, fast, and reliable health insights.</span>
          </p>
        </div>
      </div>

      <!-- Disclaimer Card -->
      <div class="info-card">
        <div class="card-icon">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <h2 class="text-2xl font-bold text-cyan-300 mb-4">Important Disclaimer</h2>
        <div class="text-cyan-200 space-y-3">
          <p class="flex items-start">
            <i class="fas fa-stethoscope text-cyan-400 mr-2 mt-1"></i>
            <span><strong>Not Medical Advice:</strong> This tool provides predictive analysis only and does not replace professional medical diagnosis.</span>
          </p>
          <p class="flex items-start">
            <i class="fas fa-user-md text-cyan-400 mr-2 mt-1"></i>
            <span><strong>Consult Professionals:</strong> Always consult with qualified healthcare providers for medical decisions and treatments.</span>
          </p>
          <p class="flex items-start">
            <i class="fas fa-database text-cyan-400 mr-2 mt-1"></i>
            <span><strong>Data Accuracy:</strong> Results depend on input accuracy. The system is not liable for incorrect data entry.</span>
          </p>
          <p class="flex items-start">
            <i class="fas fa-lock text-cyan-400 mr-2 mt-1"></i>
            <span><strong>Privacy:</strong> While we implement security measures, no system is completely immune to breaches.</span>
          </p>
        </div>

        <div class="mt-6 p-4 bg-cyan-900/30 rounded-lg border border-cyan-700/50">
          <div class="flex items-start">
            <input type="checkbox" id="agreeCheckbox" class="mt-1 mr-3 rounded bg-transparent border-cyan-300/50 text-cyan-400 focus:ring-cyan-400">
            <label for="agreeCheckbox" class="text-cyan-200 text-sm">
              I understand that this is a predictive tool only and agree to consult healthcare professionals for medical advice. I have read and accept the terms of use.
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Continue Button -->
    <div class="text-center mt-8">
      <button id="continueBtn" disabled
        class="bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white font-semibold py-3 px-12 rounded-xl transition-all duration-300 shadow-lg opacity-50 cursor-not-allowed">
        Continue to Sign In <i class="fas fa-arrow-right ml-2"></i>
      </button>
      <p class="text-cyan-200 text-sm mt-3">You must accept the disclaimer to continue</p>
    </div>
  </div>

  <!-- SIGN IN FORM -->
  <div id="signInContent" class="hidden w-full max-w-md glass-panel p-8 shadow-2xl mt-10">
    <h1 class="text-3xl font-bold mb-2 text-center text-cyan-300">Secure Sign In üîê</h1>
    <p class="text-center text-sm text-cyan-200 mb-6">Access your diabetes prediction dashboard</p>

    <!-- Google Sign In Button -->
    <button id="googleSignInBtn" class="google-btn mb-4">
      <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
        <path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"/>
        <path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"/>
        <path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"/>
        <path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"/>
      </svg>
      Continue with Google
    </button>

    <div class="flex items-center my-4">
      <div class="flex-1 border-t border-cyan-300/30"></div>
      <span class="px-3 text-cyan-200 text-sm">or</span>
      <div class="flex-1 border-t border-cyan-300/30"></div>
    </div>

    <form id="signInForm" class="space-y-4">
      <div>
        <input name="email" id="email" placeholder="Email Address" type="email" required
               class="w-full p-3 rounded-xl bg-transparent border border-cyan-300/50 text-white placeholder-cyan-200 form-input transition-all">
      </div>

      <div>
        <input name="password" id="password" placeholder="Password" type="password" required
               class="w-full p-3 rounded-xl bg-transparent border border-cyan-300/50 text-white placeholder-cyan-200 form-input transition-all">
      </div>

      <div class="flex items-center justify-between text-sm">
        <label class="flex items-center text-cyan-200">
          <input type="checkbox" class="rounded bg-transparent border-cyan-300/50 text-cyan-400 focus:ring-cyan-400">
          <span class="ml-2">Remember me</span>
        </label>
        <a href="#" class="text-cyan-300 hover:text-cyan-200 transition-colors">Forgot password?</a>
      </div>

      <button id="signInBtn" type="submit"
              class="w-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white font-semibold py-3 rounded-xl transition-all duration-300 shadow-lg hover:shadow-cyan-500/25">
        Sign In üîç
      </button>

      <div class="text-center text-cyan-200 text-sm mt-4">
        Don't have an account?
        <a href="#" class="text-cyan-300 font-semibold hover:text-cyan-200 transition-colors">Sign up here</a>
      </div>
    </form>

    <!-- EMAIL PREVIEW -->
    <div id="emailPreview" class="email-preview mt-6 hidden">
      <h3 class="text-lg font-semibold text-cyan-300 mb-3">Email Preview</h3>
      <div class="text-sm text-cyan-200">
        <p><strong>To:</strong> <span id="preview-to">user@example.com</span></p>
        <p><strong>Subject:</strong> Diabetes Prediction App - Sign In Details</p>
        <div class="mt-2 p-2 bg-black/30 rounded-lg">
          <p>Hello,</p>
          <p class="mt-2">Here are your sign-in details for the Diabetes Prediction App:</p>
          <ul class="mt-2 ml-4">
            <li><strong>Email:</strong> <span id="preview-email">user@example.com</span></li>
            <li><strong>Password:</strong> <span id="preview-password">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span></li>
          </ul>
          <p class="mt-2">Thank you for using our service!</p>
          <p class="mt-4 text-xs opacity-70">- Diabetes Prediction System Team</p>
        </div>
      </div>
      <div class="mt-4 flex justify-between">
        <button id="editBtn" class="bg-cyan-600 hover:bg-cyan-500 text-white px-4 py-2 rounded-lg text-sm transition-colors">
          <i class="fas fa-edit mr-1"></i> Edit
        </button>
        <button id="sendEmailBtn" class="bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg text-sm transition-colors">
          <i class="fas fa-paper-plane mr-1"></i> Send to My Email
        </button>
      </div>
    </div>

    <!-- SIGN IN STATUS -->
    <div id="signInStatus" class="mt-6 hidden text-center">
      <h2 class="text-2xl font-bold text-cyan-300 mb-3">Authentication Status</h2>
      <div id="statusBox" class="p-6 rounded-xl transition-all backdrop-blur-lg shadow-lg border">
        <p id="statusText" class="text-lg font-semibold"></p>
        <div id="loadingIndicator" class="mt-4">
          <div class="inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-cyan-400 border-r-transparent"></div>
          <p class="mt-2 text-cyan-200">Processing your request...</p>
        </div>
      </div>
      <button id="backToSignInBtn" class="mt-4 bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-2 rounded-lg">Back to Sign In üîÅ</button>
    </div>
  </div>

  <!-- LOADING HOLOGRAM -->
  <div id="loadingOverlay" class="hidden fixed inset-0 bg-black/85 backdrop-blur-md flex flex-col items-center justify-center z-40">
    <div class="relative w-36 h-36 mb-6">
      <div class="absolute inset-0 rounded-full border-4 border-cyan-400/30 animate-ping"></div>
      <div class="absolute inset-0 flex items-center justify-center text-6xl animate-hologram">üß†</div>
    </div>
    <h2 class="text-xl font-semibold text-cyan-300 animate-pulse">Scanning biomarkers‚Ä¶</h2>
  </div>

  <!-- MAIN APP CONTENT (DIABETES PREDICTION FORM) -->
  <div id="mainAppContent" class="hidden main-app">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-3xl font-bold text-cyan-300">Diabetes Prediction App üß¨</h1>
      <button id="logoutBtn" class="bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg transition-colors">
        <i class="fas fa-sign-out-alt mr-1"></i> Logout
      </button>
    </div>
    <p class="text-center text-sm text-cyan-200 mb-6">AI-powered health insights using advanced analytics</p>

    <!-- BMI CALCULATOR SECTION - COMPACT VERSION -->
    <div class="info-card bmi-compact mb-6">
      <div class="card-icon">
        <i class="fas fa-calculator"></i>
      </div>
      <h2 class="text-2xl font-bold text-cyan-300 mb-4">BMI Calculator</h2>
      <p class="text-cyan-200 mb-4">Calculate your Body Mass Index (BMI) to use in the prediction form</p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div>
          <label class="block text-cyan-200 mb-2">Weight (kg)</label>
          <input id="weight" type="number" placeholder="Enter weight in kg"
                 class="w-full p-3 rounded-xl bg-transparent border border-cyan-300/50 text-white placeholder-cyan-200">
        </div>
        <div>
          <label class="block text-cyan-200 mb-2">Height (cm)</label>
          <input id="height" type="number" placeholder="Enter height in cm"
                 class="w-full p-3 rounded-xl bg-transparent border border-cyan-300/50 text-white placeholder-cyan-200">
        </div>
      </div>

      <button id="calculateBmiBtn"
              class="w-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white font-semibold py-3 rounded-xl transition-all duration-300 shadow-lg hover:shadow-cyan-500/25">
        Calculate BMI üìä
      </button>

      <div id="bmiResult" class="mt-4 hidden text-center">
        <div class="p-4 rounded-xl border border-cyan-400/50 bg-cyan-900/20">
          <h3 class="text-lg font-semibold text-cyan-300 mb-2">Your BMI Result</h3>
          <p class="text-2xl font-bold text-cyan-200" id="bmiValue">0.0</p>
          <p class="text-cyan-200 mt-2" id="bmiCategory">Category will appear here</p>
          <button id="useBmiBtn" class="mt-3 bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg text-sm transition-colors">
            <i class="fas fa-arrow-right mr-1"></i> Use this BMI in Prediction
          </button>
        </div>
      </div>
    </div>

    <form id="predictForm" class="space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input name="age" id="age" placeholder="Age" type="number" required class="w-full p-3 rounded-xl bg-transparent border border-cyan-300/50 text-white placeholder-cyan-200">
        <input name="hypertension" id="hypertension" placeholder="Hypertension (0 or 1)" type="number" required class="w-full p-3 rounded-xl bg-transparent border border-cyan-300/50 text-white placeholder-cyan-200">
        <input name="heart_disease" id="heart_disease" placeholder="Heart Disease (0 or 1)" type="number" required class="w-full p-3 rounded-xl bg-transparent border border-cyan-300/50 text-white placeholder-cyan-200">
        <input name="bmi" id="bmi" placeholder="BMI" type="number" step="0.1" required class="w-full p-3 rounded-xl bg-transparent border border-cyan-300/50 text-white placeholder-cyan-200">
        <input name="HbA1c_level" id="HbA1c_level" placeholder="HbA1c Level" type="number" step="0.1" required class="w-full p-3 rounded-xl bg-transparent border border-cyan-300/50 text-white placeholder-cyan-200">
        <input name="blood_glucose_level" id="blood_glucose_level" placeholder="Blood Glucose Level" type="number" required class="w-full p-3 rounded-xl bg-transparent border border-cyan-300/50 text-white placeholder-cyan-200">
      </div>

      <button id="runBtn" type="submit" class="w-full bg-cyan-500 hover:bg-cyan-400 text-black font-semibold py-3 rounded-xl transition">Run Prediction üîç</button>
    </form>

    <!-- RESULT -->
    <div id="resultSection" class="mt-6 hidden text-center">
      <h2 class="text-2xl font-bold text-cyan-300 mb-3">Prediction Result</h2>

      <!-- Result Illustration -->
      <div id="resultIllustration" class="result-illustration">
        <i id="resultIcon" class="fas fa-question-circle text-cyan-300"></i>
      </div>

      <div id="resultBox" class="p-6 rounded-xl transition-all backdrop-blur-lg shadow-lg border">
        <p id="resultText" class="text-lg font-semibold"></p>
        <div id="confidenceBox" class="mt-3 hidden">
          <p id="confidenceText" class="confidence-box text-cyan-100"></p>
        </div>
      </div>
      <button id="retryBtn" class="mt-4 bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-2 rounded-lg">Try Again üîÅ</button>
    </div>
  </div>

  <script>
    const introScreen = document.getElementById('introScreen');
    const startBtn = document.getElementById('startBtn');
    const rocketIcon = document.getElementById('rocketIcon');
    const infoScreen = document.getElementById('infoScreen');
    const agreeCheckbox = document.getElementById('agreeCheckbox');
    const continueBtn = document.getElementById('continueBtn');
    const signInContent = document.getElementById('signInContent');
    const googleSignInBtn = document.getElementById('googleSignInBtn');
    const signInForm = document.getElementById('signInForm');
    const emailPreview = document.getElementById('emailPreview');
    const signInStatus = document.getElementById('signInStatus');
    const statusText = document.getElementById('statusText');
    const statusBox = document.getElementById('statusBox');
    const loadingIndicator = document.getElementById('loadingIndicator');
    const backToSignInBtn = document.getElementById('backToSignInBtn');
    const editBtn = document.getElementById('editBtn');
    const sendEmailBtn = document.getElementById('sendEmailBtn');
    const mainAppContent = document.getElementById('mainAppContent');
    const logoutBtn = document.getElementById('logoutBtn');
    const predictForm = document.getElementById('predictForm');
    const resultSection = document.getElementById('resultSection');
    const resultText = document.getElementById('resultText');
    const confidenceText = document.getElementById('confidenceText');
    const confidenceBox = document.getElementById('confidenceBox');
    const resultBox = document.getElementById('resultBox');
    const retryBtn = document.getElementById('retryBtn');
    const resultIllustration = document.getElementById('resultIllustration');
    const resultIcon = document.getElementById('resultIcon');

    // BMI Calculator Elements
    const calculateBmiBtn = document.getElementById('calculateBmiBtn');
    const weightInput = document.getElementById('weight');
    const heightInput = document.getElementById('height');
    const bmiResult = document.getElementById('bmiResult');
    const bmiValue = document.getElementById('bmiValue');
    const bmiCategory = document.getElementById('bmiCategory');
    const useBmiBtn = document.getElementById('useBmiBtn');

    // üé§ Prepare voice options - KEPT EXACTLY THE SAME
    let selectedVoice = null;
    function setVoice() {
      const voices = speechSynthesis.getVoices();
      selectedVoice = voices.find(v => /female|samantha|google uk female|zira/i.test(v.name)) || voices[0];
    }
    speechSynthesis.onvoiceschanged = setVoice;

    // BMI Calculator Functionality
    calculateBmiBtn.addEventListener('click', () => {
      const weight = parseFloat(weightInput.value);
      const height = parseFloat(heightInput.value) / 100; // Convert cm to meters

      if (!weight || !height || height === 0) {
        alert('Please enter valid weight and height values');
        return;
      }

      const bmi = weight / (height * height);
      bmiValue.textContent = bmi.toFixed(1);

      // Determine BMI category
      let category = '';
      let categoryColor = '';

      if (bmi < 18.5) {
        category = 'Underweight';
        categoryColor = 'text-yellow-400';
      } else if (bmi < 25) {
        category = 'Normal weight';
        categoryColor = 'text-green-400';
      } else if (bmi < 30) {
        category = 'Overweight';
        categoryColor = 'text-orange-400';
      } else {
        category = 'Obese';
        categoryColor = 'text-red-400';
      }

      bmiCategory.textContent = category;
      bmiCategory.className = `mt-2 ${categoryColor} font-semibold`;
      bmiResult.classList.remove('hidden');
      bmiResult.classList.add('fade-in');
    });

    // Use BMI in prediction form
    useBmiBtn.addEventListener('click', () => {
      const bmi = parseFloat(bmiValue.textContent);
      document.getElementById('bmi').value = bmi.toFixed(1);

      // Scroll to prediction form
      document.getElementById('predictForm').scrollIntoView({ behavior: 'smooth' });

      // Show confirmation
      const originalText = useBmiBtn.innerHTML;
      useBmiBtn.innerHTML = '<i class="fas fa-check mr-1"></i> BMI Applied!';
      useBmiBtn.classList.remove('bg-green-600');
      useBmiBtn.classList.add('bg-blue-600');

      setTimeout(() => {
        useBmiBtn.innerHTML = originalText;
        useBmiBtn.classList.remove('bg-blue-600');
        useBmiBtn.classList.add('bg-green-600');
      }, 2000);
    });

    // Intro screen animation
    startBtn.addEventListener('click', () => {
      rocketIcon.classList.add('animate-rocket');
      setTimeout(() => {
        introScreen.classList.add('fade-out');
        setTimeout(() => {
          introScreen.style.display = 'none';
          infoScreen.classList.remove('hidden');
          infoScreen.classList.add('fade-in');
        }, 900);
      }, 2200);
    });

    // Enable continue button when checkbox is checked
    agreeCheckbox.addEventListener('change', () => {
      if (agreeCheckbox.checked) {
        continueBtn.disabled = false;
        continueBtn.classList.remove('opacity-50', 'cursor-not-allowed');
        continueBtn.classList.add('hover:shadow-cyan-500/25');
      } else {
        continueBtn.disabled = true;
        continueBtn.classList.add('opacity-50', 'cursor-not-allowed');
        continueBtn.classList.remove('hover:shadow-cyan-500/25');
      }
    });

    // Continue to sign in form
    continueBtn.addEventListener('click', () => {
      infoScreen.classList.add('hidden');
      signInContent.classList.remove('hidden');
      signInContent.classList.add('fade-in');
    });

    // Google Sign In
    googleSignInBtn.addEventListener('click', () => {
      // Show loading state
      signInContent.classList.add('hidden');
      const overlay = document.getElementById('loadingOverlay');
      overlay.classList.remove('hidden');

      // Simulate Google authentication
      setTimeout(() => {
        overlay.classList.add('hidden');
        mainAppContent.classList.remove('hidden');
        mainAppContent.classList.add('fade-in');
      }, 2000);
    });

    // Sign in form submission
    signInForm.addEventListener('submit', (e) => {
      e.preventDefault();

      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      // Update email preview
      document.getElementById('preview-to').textContent = email;
      document.getElementById('preview-email').textContent = email;
      document.getElementById('preview-password').textContent = password;

      // Show email preview
      signInForm.classList.add('hidden');
      emailPreview.classList.remove('hidden');
      emailPreview.classList.add('fade-in');
    });

    // Edit button - go back to form
    editBtn.addEventListener('click', () => {
      emailPreview.classList.add('hidden');
      signInForm.classList.remove('hidden');
      signInForm.classList.add('fade-in');
    });

    // Send email button
    sendEmailBtn.addEventListener('click', () => {
      const email = document.getElementById('email').value;

      // Show loading state
      emailPreview.classList.add('hidden');
      signInStatus.classList.remove('hidden');
      loadingIndicator.classList.remove('hidden');

      // Simulate sending email with timeout
      setTimeout(() => {
        loadingIndicator.classList.add('hidden');

        // Success state
        statusBox.className = "p-6 rounded-xl transition-all backdrop-blur-lg shadow-lg border border-green-500/50 bg-green-900/20";
        statusText.textContent = "‚úÖ Email sent successfully! Check your inbox for sign-in details.";
        statusText.className = "text-lg font-semibold text-green-300";

        // Set voice and speak
        setVoice();
        const utterance = new SpeechSynthesisUtterance(`Email sent successfully to ${email}. Check your inbox for sign-in details.`);
        utterance.voice = selectedVoice;
        utterance.rate = 1;
        utterance.pitch = 1;
        speechSynthesis.speak(utterance);
      }, 2000);
    });

    // Back to sign in button
    backToSignInBtn.addEventListener('click', () => {
      signInStatus.classList.add('hidden');
      signInForm.classList.remove('hidden');
      signInForm.classList.add('fade-in');
    });

    // Logout button
    logoutBtn.addEventListener('click', () => {
      mainAppContent.classList.add('hidden');
      signInContent.classList.remove('hidden');
      signInContent.classList.add('fade-in');
    });

    // Prediction form submission
    predictForm.addEventListener('submit', (e) => {
      e.preventDefault();

      // Show loading overlay
      const overlay = document.getElementById('loadingOverlay');
      overlay.classList.remove('hidden');

      // Simulate prediction processing
      setTimeout(() => {
        overlay.classList.add('hidden');
        resultSection.classList.remove('hidden');
        resultSection.classList.add('fade-in');

        // Random result for demo (in real app, this would come from the model)
        const isDiabetic = Math.random() > 0.5;
        const confidence = (Math.random() * 30 + 70).toFixed(1); // 70-100% confidence

        // Set result content based on prediction
        if (isDiabetic) {
          resultText.textContent = "‚ö†Ô∏è The model predicts you may have diabetes. Please consult a healthcare professional for proper diagnosis and guidance.";
          resultText.className = "text-lg font-semibold text-yellow-300";
          resultBox.className = "p-6 rounded-xl transition-all backdrop-blur-lg shadow-lg border border-yellow-500/50 bg-yellow-900/20";

          // Set illustration for negative result
          resultIcon.className = "fas fa-exclamation-triangle text-yellow-400";
          resultIllustration.style.borderColor = "rgba(251, 191, 36, 0.5)";
          resultIllustration.style.background = "rgba(251, 191, 36, 0.1)";

          // Set voice message
          const utterance = new SpeechSynthesisUtterance("The model predicts you may have diabetes. Please consult a healthcare professional for proper diagnosis and guidance.");
          utterance.voice = selectedVoice;
          utterance.rate = 0.9;
          speechSynthesis.speak(utterance);
        } else {
          resultText.textContent = "üéâ Great news! The model predicts you are not diabetic. Keep maintaining a healthy lifestyle! üòä";
          resultText.className = "text-lg font-semibold text-green-300";
          resultBox.className = "p-6 rounded-xl transition-all backdrop-blur-lg shadow-lg border border-green-500/50 bg-green-900/20";

          // Set illustration for positive result
          resultIcon.className = "fas fa-check-circle text-green-400";
          resultIllustration.style.borderColor = "rgba(34, 197, 94, 0.5)";
          resultIllustration.style.background = "rgba(34, 197, 94, 0.1)";

          // Set voice message
          const utterance = new SpeechSynthesisUtterance("Great news! The model predicts you are not diabetic. Keep maintaining a healthy lifestyle!");
          utterance.voice = selectedVoice;
          utterance.rate = 1.1;
          utterance.pitch = 1.1;
          speechSynthesis.speak(utterance);
        }

        // Show confidence
        confidenceText.textContent = `Model Confidence: ${confidence}%`;
        confidenceBox.classList.remove('hidden');
      }, 3000);
    });

    // Retry button
    retryBtn.addEventListener('click', () => {
      resultSection.classList.add('hidden');
      predictForm.reset();
    });
  </script>
</body>
</html>